# 7장 스프링 핵심 기술의 응용

## 7.6 스프링 3.1의 DI
8년이 지난 지금까지 스프링은 여러 변화를 거치면서도 완벽에 가까운 호환성을 유지하고있다.
이것은 스프링 프레임워크가 근본적으로 지지하는 객체지향의 특징과 장점을 극대화하는 유연성과 확장성을
고수한것, 그것을 위해 DI패턴을 이용한 원칙을 충실하게 따라 만들어 졌기 때문이라고 할 수 있다.

### 자바 언어의 변화와 스프링
스프링이 제공하는 근본적인 DI의 원리는 변하지 않았지만 Java언어에는 적지 않은 변화가 있었다.
이에따라 변하게된 DI의 사용방식의 변화를 정리해봤다.

#### Annotation의 메타정보 활용
자바5에서 나온 Annotation의 등장은 Application의 핵심 로직을 담은 자바코드와 이를 지원하는
IoC 방식의 프레임워크, 프레임워크가 참조하는 메타정보라는 세가지의 구성방식과 어우러져 긍정적으로 작용한다.

> DI 메타정보로 활용되던 XML은 XML자체의 한계점을 맞은 상황에서 Annotation의 등장은 메타정보를 부여하고
추출해 내는데 유리하다는 장점과 작성시의 수월함으로 인해 점차 많은 영역에서 대체되었다.

#### 정책과 관례를 이용한 프로그래밍
Annotation을 이용한 프로그래밍 방식은 동작하는 내용을 기술하는 것이 아닌 규칙과 관례를 이용한
프로그래밍 스타일을 적극적으로 포용하게 만들었다.

예를들어 스프링의 XML을 작성할때도 미리 정해진 규칙이나 관례를 이용해 작성하여 코드의 양을 최소화 시켰고
Annotation은 관례를 부여해 명시적인 설정을 최대한 배제하는식으로 작성한것이다.

대표적으로 `@Transactional` 은 스프링에서 정해진 4단계의 관례화된 정책을 통해 우선순위같은 생략된 정보도 표현할 수 있다.

### 7.6.1 자바 코드를 이용한 빈 설정 (Java Config)
> 7.6.1절에서는 강의내용에서 진행했던 XML설정으로 이루어진 기존 코드를 Java Config로 리팩토링하는 과정으로 구성되어있다.

Java Config 구성으로의 전환을 위한 첫번째 단계로는 Bean이 정의되어있는 ApplicationContext.xml을 class로 전환하는 작업을 진행한다.

#### 컨텍스트 변경
책의 예제에서는 Test코드에서 참조하는 Bean객체들이 위치한
```java
@ContextConfiguration(location="/test-applicationContext.xml")
```
가 클래스 정보를 참조하도록 바꿨다.

#### `<context:annotation-config />` 제거
초기화를 수행하는 메서드에 붙이는 `@PostConstruct` 의 사용이 없어진다. XML에서 JavaCode로의 대체되는 것은
`@Configuration` 이 붙은 자바클래스를 DI정보로 사용하기 때문에 더이상 필요 없어지는것이다.
